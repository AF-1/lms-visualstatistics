const xAxisData=[];const yAxisData=[];const labelExtraData=[];const legendtext=[];const yLabel=[];const querytype=[];const LMSdata={labels:xAxisData,datasets:[{data:yAxisData,axis:'y',label:yLabel,}]};var palette=['rgb(180, 236, 158)','rgb(153, 194, 233)','rgb(251, 221, 124)','rgb(147, 185, 165)','rgb(186, 158, 242)','rgb(238, 196, 151)','rgb(108, 108, 240)','rgb(243, 223, 164)','rgb(220, 129, 121)','rgb(162, 221, 150)','rgb(142, 169, 206)','rgb(246, 224, 210)','rgb(163, 163, 164)','rgb(219, 201, 151)','rgb(208, 207, 209)',];var isHorizontal=true;var defaultOrder=true;var maxLabelLength=30;var myChartDoughnut;var myChartBar;var myChartLine;var myChartBarStacked;Chart.register(ChartDataLabels);const actions=[{name:'Trigger Hover',handler:triggerHover}];function triggerHover(chart){if(chart.getActiveElements().length>0){chart.setActiveElements([]);}else{chart.setActiveElements([{datasetIndex:0,index:0,}]);}chart.update();}function round(value,precision){var multiplier=Math.pow(10,precision||0);return Math.round(value*multiplier)/multiplier;}function drawBarChart(orientation){var ctxBar=document.getElementById('chartCanvas').getContext("2d");destroyUsedCanvas(ctxBar);const configBar={type:'bar',data:LMSdata,options:{responsive:true,datasets:{bar:{fill:false,backgroundColor:['rgba(54, 162, 245, 0.5)',],borderWidth:0,hoverBackgroundColor:'rgba(54, 162, 245, 1)',},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Hover over bars for more information.',},tooltip:{mode:'nearest',xAlign:'left',yAlign:'center',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){if(labelExtraData.length>0){var extraLabelInfo=labelExtraData[tooltipItem[0].dataIndex];return tooltipItem[0].label+" -- "+extraLabelInfo;}else{return tooltipItem[0].label;}},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=round(parseFloat(tooltipItem.dataset.data[tooltipItem.dataIndex]),1);return thisLabel+": "+thisValue;}},},datalabels:{display:false,anchor:'end',align:'end',clamp:true,rotation:0,backgroundColor:null,borderWidth:0,formatter:function(value,context){return round(value,1);},},},indexAxis:'y',scales:{y:{grid:{display:false,},ticks:{callback:function(val){var thislabel=this.getLabelForValue(val);return thislabel.length>maxLabelLength?(thislabel.substr(0,maxLabelLength)+'...'):thislabel;},},reverse:false,},x:{ticks:{precision:0,},beginAtZero:true,}},},};myChartBar=new Chart(ctxBar,configBar);hideDatalabels(myChartBar,1);toggleColorScheme(myChartBar,"Bar");if(orientation){SwitchToVertical();}else{SwitchToHorizontal();}}function drawBarTimeChart(){var ctxBarTime=document.getElementById('chartCanvas').getContext("2d");destroyUsedCanvas(ctxBarTime);const configBarTime={type:'bar',data:LMSdata,options:{responsive:true,datasets:{bar:{fill:false,backgroundColor:['rgba(54, 162, 245, 0.5)',],borderWidth:0,hoverBackgroundColor:'rgba(54, 162, 245, 1)',},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Hover over data points for more information.',},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){if(labelExtraData.length>0){var extraLabelInfo=labelExtraData[tooltipItem[0].dataIndex];return tooltipItem[0].label+" -- "+extraLabelInfo;}else{return tooltipItem[0].label;}},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=round(parseFloat(tooltipItem.dataset.data[tooltipItem.dataIndex]),1);return thisLabel+": "+thisValue;}},},datalabels:{display:false,anchor:'end',align:'end',clamp:true,rotation:0,backgroundColor:null,borderWidth:0,formatter:function(value,context){return round(value,1);},},},indexAxis:'x',scales:{x:{grid:{display:false,},},y:{ticks:{precision:0,},beginAtZero:true,}},},};myChartBarTime=new Chart(ctxBarTime,configBarTime);hideDatalabels(myChartBarTime,1);toggleColorScheme(myChartBarTime,"BarTime");}function drawDoughnutChart(){var ctxDoughnut=document.getElementById("chartCanvas").getContext("2d");ctxDoughnut.height=700;destroyUsedCanvas(ctxDoughnut);function getLightnessOfRGB(rgbString){const rgbIntArray=(rgbString.replace(/ /g,'').slice(4,-1).split(',').map(e=>parseInt(e)));const highest=Math.max(...rgbIntArray);const lowest=Math.min(...rgbIntArray);return(highest+lowest)/2/255;}function getLowestMiddleHighest(rgbIntArray){let highest={val:-1,index:-1};let lowest={val:Infinity,index:-1};rgbIntArray.map((val,index)=>{if(val>highest.val){highest={val:val,index:index};}if(val<lowest.val){lowest={val:val,index:index};}});if(lowest.index===highest.index){lowest.index=highest.index+1;}let middle={index:(3-highest.index-lowest.index)};middle.val=rgbIntArray[middle.index];return[lowest,middle,highest];}function saturate(rgb){const rgbIntArray=(rgb.replace(/ /g,'').slice(4,-1).split(',').map(e=>parseInt(e)));const grayVal=getLightnessOfRGB(rgb)*255;const[lowest,middle,highest]=getLowestMiddleHighest(rgbIntArray);if(lowest.val===highest.val){return rgb;}const saturationRange=Math.round(Math.min(255-grayVal,grayVal));const maxChange=Math.min((255-highest.val),lowest.val);const changeAmount=Math.min(saturationRange/0.03,maxChange);const middleValueRatio=(grayVal-middle.val)/(grayVal-highest.val);const returnArray=[];returnArray[highest.index]=Math.round(highest.val+changeAmount);returnArray[lowest.index]=Math.round(lowest.val-changeAmount);returnArray[middle.index]=Math.round(grayVal+(returnArray[highest.index]-grayVal)*middleValueRatio);return(`rgb(${[returnArray].join()})`);}const configDoughnut={type:'doughnut',data:LMSdata,options:{responsive:true,aspectRatio:16/8,cutout:'55%',datasets:{doughnut:{fill:false,backgroundColor:function(context){return palette[context.dataIndex%palette.length];},borderWidth:0,},},plugins:{legend:{position:'top',labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Click on legend items to hide segments, hover over segments for more information.',},tooltip:{enabled:false,external:function(context){var tooltipEl=document.getElementById("chartjs-tooltip");var tooltipModel=context.tooltip;if(tooltipModel.opacity===0){tooltipEl.style.opacity=0;return;}function getBody(bodyItem){return bodyItem.lines;}if(tooltipModel.body){var titleLines=tooltipModel.title||[];var bodyLines=tooltipModel.body.map(getBody);let total=0;LMSdata.datasets[0].data.forEach(num=>{total+=num;});const currentColor=saturate(tooltipModel.labelColors[0].backgroundColor);const currentValue=LMSdata.datasets[0].data[tooltipModel.dataPoints[0].dataIndex];const percentage=round(((currentValue*100)/total),1)+"%";var line=tooltipModel.body[0].lines[0],parts=line.split(': ');var label=parts[0].trim();var ctxEl=document.getElementById("chartCanvas").getContext("2d");var centerX=ctxEl.canvas.clientWidth;var centerY=ctxEl.canvas.clientHeight;tooltipEl.style.background='rgba(0, 0, 0, 0.7)';tooltipEl.style.borderRadius='3px';tooltipEl.style.color='white';tooltipEl.style.opacity=1;tooltipEl.style.pointerEvents='none';tooltipEl.style.left=Math.round((centerX-tooltipEl.clientWidth+20)/2)+"px";tooltipEl.style.top=Math.round((centerY-tooltipEl.clientHeight+50+41)/2)+"px";var innerHtml='<tbody class="doughnutTable"><tr><td style="color:'+currentColor+' !important;">'+label+'</td></tr>';innerHtml+='<tr><td class="vstats-doughnuttdcolor">'+currentValue+'</td></tr>';innerHtml+='<tr><td class="vstats-doughnuttdcolor">'+percentage+'</td></tr></tbody>';var tableRoot=tooltipEl.querySelector('table');tableRoot.innerHTML=innerHtml;}},},datalabels:{backgroundColor:null,borderColor:'black',borderWidth:0,color:'black',display:false,formatter:function(value,context){var total=0;LMSdata.datasets[0].data.forEach(num=>{total+=num;});var dataset=context.dataset;var value=dataset.data[context.dataIndex];const percentage=round(((value*100)/total),1);return percentage>1?value:'';},rotation:function(context){var dataset=context.dataset;var total=dataset.data.reduce(function(a,b){return a+b},0);var count=dataset.data.length;var thisDataIndex=context.dataIndex;var value=dataset.data[context.dataIndex];var thisIndex;var subtotal=0;for(thisIndex=0;thisIndex<thisDataIndex+1;thisIndex++){var thisValue=dataset.data[thisIndex];subtotal+=thisValue;}var thisSegmentMidAngle=(value/total*360)/2;var subtotalAngle=subtotal/total*360;var thisAngle=subtotalAngle-thisSegmentMidAngle;var thisTextRotation=0;if(thisAngle<=180){thisTextRotation=thisAngle-90;}else{thisTextRotation=thisAngle-90-180;}return thisTextRotation;},anchor:'center',},},},};myChartDoughnut=new Chart(ctxDoughnut,configDoughnut);hideDatalabels(myChartDoughnut,1);toggleColorScheme(myChartDoughnut,"Doughnut");}function drawLineChart(customType){var ctxLine=document.getElementById("chartCanvas").getContext("2d");destroyUsedCanvas(ctxLine);const configLine={type:'line',data:LMSdata,options:{responsive:true,datasets:{line:{borderColor:'rgba(54, 162, 245, 1)',backgroundColor:'rgba(54, 162, 245, 0.5)',fill:true,pointBackgroundColor:'#fff',radius:3,cubicInterpolationMode:'monotone',tension:0.4,},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Hover over data points for more information.',},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){return "Bit rate: "+tooltipItem[0].label+" kbps";},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=round(parseFloat(tooltipItem.dataset.data[tooltipItem.dataIndex]),1);return thisLabel+": "+thisValue;}},},datalabels:{display:false,},},indexAxis:'x',scales:{x:{grid:{display:false,},},y:{ticks:{precision:0,}},},},};myChartLine=new Chart(ctxLine,configLine);if(customType=='listeningtimes'){myChartLine.config.options.plugins.tooltip={mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){return "Listening time: "+tooltipItem[0].label+"h";},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=tooltipItem.dataset.data[tooltipItem.dataIndex];return thisLabel+": "+thisValue;}},};}toggleColorScheme(myChartLine,"Line");}function drawStackedBarChart(StackedLMSData,fileFormats){var ctxBarStacked=document.getElementById('chartCanvas').getContext("2d");destroyUsedCanvas(ctxBarStacked);var LMSdataBarStacked={labels:["<192","192-255","256-319","320-499","500-699","700-999","1000-1200",">1200","No bit rate"],datasets:[],};const configBarStacked={type:'bar',data:LMSdataBarStacked,options:{responsive:true,datasets:{bar:{fill:false,borderWidth:0,},},plugins:{legend:{position:'top',labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Click on legend items to hide them, hover over segments for more information.',},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:-5,caretSize:8,callbacks:{title:function(tooltipItem){return "Bit rate: "+tooltipItem[0].label+" kbps";},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=tooltipItem.formattedValue;return thisLabel+": "+thisValue+(thisValue==1?" track":" tracks");}},},datalabels:{display:false,}},indexAxis:'x',scales:{x:{stacked:true,grid:{display:false,},ticks:{maxRotation:0,},},y:{stacked:true,ticks:{precision:0,},beginAtZero:true,}},},};var myChartBarStacked=new Chart(ctxBarStacked,configBarStacked);for(var i=0;i<fileFormats.length;i++){var thisFileFormat=fileFormats[i];var newDataSet={label:thisFileFormat,data:StackedLMSData,parsing:{yAxisKey:thisFileFormat},};myChartBarStacked.config.data.datasets.push(newDataSet);myChartBarStacked.config.data.datasets[i].backgroundColor=palette[i%palette.length];}toggleColorScheme(myChartBarStacked,"BarStacked");myChartBarStacked.update();}function drawScatterChart(StackedLMSData,bitRates,fileFormats,customType){var ctxScatter=document.getElementById("chartCanvas").getContext("2d");destroyUsedCanvas(ctxScatter);var LMSdataScatter;var configScatter;if(customType=="extraLabel"){LMSdataScatter=LMSdata;configScatter={type:'scatter',data:LMSdataScatter,options:{responsive:true,datasets:{scatter:{pointRadius:7,pointRadiusBorderWidth:0,pointHoverBorderWidth:0,pointHoverRadius:7,backgroundColor:['rgba(54, 162, 245, 0.5)',],hoverBackgroundColor:'rgba(54, 162, 245, 1)',},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Hover over data points for more information.',},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){var avgPlaycountValue=round(parseFloat(tooltipItem[0].label.replace(/,/,'.')),1);var avgRatingValue=round(parseFloat(tooltipItem[0].formattedValue.replace(/,/,'.')),1);var thisAVGPlaycount="Avg. play count: "+avgPlaycountValue+"\n";var thisAVGRating="Avg. artist rating: "+avgRatingValue+(avgRatingValue==1?" star":" stars")+"\n____________________";return(thisAVGPlaycount+thisAVGRating);},label:function(tooltipItem){return labelExtraData[tooltipItem.dataIndex];}},},datalabels:{display:false,},},indexAxis:'x',scales:{x:{grid:{display:false,},title:{display:true,text:'Average play count',},},y:{ticks:{precision:0,},title:{display:true,text:"Average rating (stars)",},beginAtZero:true,},},},};}else{LMSdataScatter={labels:bitRates,datasets:[],};configScatter={type:'scatter',data:LMSdataScatter,options:{responsive:true,datasets:{scatter:{pointRadius:7,pointRadiusBorderWidth:0,pointHoverBorderWidth:0,pointHoverRadius:7,},},plugins:{legend:{position:'top',labels:{usePointStyle:true,boxWidth:9,}},title:{display:true,text:legendtext,font:{size:20}},subtitle:{display:true,text:'Click on file formats in legend to hide them, hover over points for more information.',},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:true,callbacks:{title:function(tooltipItem){return "Bit rate: "+tooltipItem[0].label+" kbps";},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=tooltipItem.formattedValue;return thisLabel+": "+thisValue+(thisValue==1?" track":" tracks");}},},datalabels:{display:false,},},indexAxis:'x',scales:{x:{grid:{display:false,},},y:{ticks:{precision:0,},beginAtZero:true,},},},};}myChartScatter=new Chart(ctxScatter,configScatter);if(customType!="extraLabel"){for(var i=0;i<fileFormats.length;i++){var thisFileFormat=fileFormats[i];var newDataSet={label:thisFileFormat,data:StackedLMSData[i],};myChartScatter.config.data.datasets.push(newDataSet);myChartScatter.config.data.datasets[i].backgroundColor=palette[i%palette.length];}}toggleColorScheme(myChartScatter,"Line");myChartScatter.update();}function updateConfigAsNewObjectHorizontal(chart){chart.options={responsive:true,datasets:{bar:{fill:false,backgroundColor:['rgba(54, 162, 245, 0.5)',],borderWidth:0,hoverBackgroundColor:'rgba(54, 162, 245, 1)',},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,},},title:{display:true,text:legendtext,font:{size:20}},tooltip:{mode:'nearest',xAlign:'left',yAlign:'center',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){if(labelExtraData.length>0){var extraLabelInfo=labelExtraData[tooltipItem[0].dataIndex];return tooltipItem[0].label+" -- "+extraLabelInfo;}else{return tooltipItem[0].label;}},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=round(parseFloat(tooltipItem.dataset.data[tooltipItem.dataIndex]),1);return thisLabel+": "+thisValue;}},},datalabels:{display:myChartBar.options.plugins.datalabels.display,anchor:'end',align:'end',clamp:true,rotation:0,backgroundColor:null,borderWidth:0,formatter:function(value,context){return round(value,1);},},},indexAxis:'y',scales:{y:{grid:{display:false,},ticks:{callback:function(val){var thislabel=this.getLabelForValue(val);return thislabel.length>maxLabelLength?(thislabel.substr(0,maxLabelLength)+'...'):thislabel;},},reverse:false,},x:{ticks:{precision:0,},beginAtZero:true,}},};chart.update();}function updateConfigAsNewObjectVertical(chart){chart.options={responsive:true,datasets:{bar:{fill:false,backgroundColor:['rgba(54, 162, 245, 0.5)',],borderWidth:0,hoverBackgroundColor:'rgba(54, 162, 245, 1)',},},plugins:{legend:{position:'top',onClick:null,labels:{usePointStyle:true,boxWidth:9,},},title:{display:true,text:legendtext,font:{size:20}},tooltip:{mode:'nearest',xAlign:'center',yAlign:'bottom',caretPadding:4,caretSize:8,displayColors:false,callbacks:{title:function(tooltipItem){if(labelExtraData.length>0){var extraLabelInfo=labelExtraData[tooltipItem[0].dataIndex];return tooltipItem[0].label+" -- "+extraLabelInfo;}else{return tooltipItem[0].label;}},label:function(tooltipItem){var thisLabel=tooltipItem.dataset.label;var thisValue=round(parseFloat(tooltipItem.dataset.data[tooltipItem.dataIndex]),1);return thisLabel+": "+thisValue;}},},datalabels:{display:myChartBar.options.plugins.datalabels.display,anchor:'end',align:'end',clamp:true,rotation:-90,backgroundColor:null,borderWidth:0,formatter:function(value,context){return round(value,1);},},},indexAxis:'x',scales:{x:{grid:{display:false,},ticks:{callback:function(val){var thislabel=this.getLabelForValue(val);return thislabel.length>maxLabelLength?(thislabel.substr(0,maxLabelLength)+'...'):thislabel;},maxRotation:90,minRotation:60,reverse:false,},},y:{ticks:{precision:0,},beginAtZero:true,}},};chart.update();}function SwitchToVertical(){updateConfigAsNewObjectVertical(myChartBar);document.getElementById("togglebtn_layout").innerHTML=`Switch to <span class="button-font-strong">horizontal</span> layout`;isHorizontal=false;document.getElementById("togglebtn_order").innerHTML=`<span class="button-font-strong">Reverse</span> order`;defaultOrder=true;myChartBar.options.scales.y.reverse=false;myChartBar.options.scales.x.reverse=false;}function SwitchToHorizontal(){updateConfigAsNewObjectHorizontal(myChartBar);document.getElementById("togglebtn_layout").innerHTML=`Switch to <span class="button-font-strong">vertical</span> layout`;isHorizontal=true;document.getElementById("togglebtn_order").innerHTML=`<span class="button-font-strong">Reverse</span> order`;defaultOrder=true;myChartBar.options.scales.y.reverse=false;myChartBar.options.scales.x.reverse=false;}function reverseOrder(){if(defaultOrder){document.getElementById("togglebtn_order").innerHTML=`<span class="button-font-strong">Restore</span> default order`;if(isHorizontal){myChartBar.options.scales.y.reverse=true;}else{myChartBar.options.scales.x.reverse=true;}defaultOrder=false;}else{document.getElementById("togglebtn_order").innerHTML=`<span class="button-font-strong">Reverse</span> order`;if(isHorizontal){myChartBar.options.scales.y.reverse=false;}else{myChartBar.options.scales.x.reverse=false;}defaultOrder=true;}myChartBar.update();}function hideDatalabels(chart,reset){var doReset=reset||0;var elID="togglebtn_datalabels";if(chart.options.plugins.datalabels.display||doReset==1){document.getElementById(elID).innerHTML=`<span class="button-font-strong">Show</span> data labels`;chart.options.plugins.datalabels.display=false;}else{document.getElementById(elID).innerHTML=`<span class="button-font-strong">Hide</span> data labels`;chart.options.plugins.datalabels.display=true;}chart.update();}function destroyUsedCanvas(ctx){var oldChart=Chart.getChart(ctx);if(typeof oldChart!=='undefined'){oldChart.destroy();}}function toggleColorScheme(thisChart,chartType){if((colorSchemeLight===false)&&(Chart.defaults.color!=='rgba(235, 235, 235, 0.1)')){Chart.defaults.borderColor='rgba(235, 235, 235, 0.1)';Chart.defaults.color='rgba(235, 235, 235, 1)';thisChart.options.scales.x={color:'rgba(235, 235, 235, 1)',precision:0,beginAtZero:true,};thisChart.options.scales.y={color:'rgba(235, 235, 235, 1)',};var elements=document.getElementsByClassName('overlay');for(var i=0;i<elements.length;i++){elements[i].style.backgroundColor="rgba(39, 38, 37, 1)";}document.getElementById('colorscheme_value').innerHTML='dark';displayGridLines(thisChart,chartType);}if((colorSchemeLight===true)&&(Chart.defaults.color!=='#666')){Chart.defaults.borderColor='rgba(0, 0, 0, 0.1)';Chart.defaults.color='#666';thisChart.options.scales.x={color:'#666',precision:0,beginAtZero:true,};thisChart.options.scales.y={color:'#666',};var elements=document.getElementsByClassName('overlay');for(var i=0;i<elements.length;i++){elements[i].style.backgroundColor='rgba(240, 240, 240, 1)';}document.getElementById('colorscheme_value').innerHTML='light';displayGridLines(thisChart,chartType);}thisChart.update();}function displayGridLines(thisChart,chartType){if(chartType==="Bar"){thisChart.options.scales.y={grid:{display:false},};}if(chartType==="BarTime"){thisChart.options.scales.y={ticks:{precision:0,},beginAtZero:true,};thisChart.options.scales.x={grid:{display:false,},};}if(chartType==="Doughnut"){thisChart.options.scales.x={display:false};thisChart.options.scales.y={display:false};}if(chartType==="Line"){thisChart.options.scales.x={grid:{display:false}};}if(chartType==="BarStacked"){thisChart.options.scales.x={grid:{display:false},stacked:true};thisChart.options.scales.y={stacked:true};}}